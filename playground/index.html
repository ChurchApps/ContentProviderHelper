<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Content Provider Helper - Playground</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="app">
      <header>
        <h1>Content Provider Helper</h1>
        <p class="subtitle">Test and explore content providers</p>
      </header>

      <!-- Breadcrumb navigation -->
      <nav id="breadcrumb" class="breadcrumb hidden">
        <button id="back-btn" class="back-btn">&larr; Back</button>
        <span id="breadcrumb-path"></span>
      </nav>

      <!-- Provider grid view -->
      <section id="providers-view">
        <h2>Available Providers</h2>
        <div id="providers-grid" class="grid"></div>
      </section>

      <!-- Content browser view -->
      <section id="browser-view" class="hidden">
        <h2 id="browser-title">Content</h2>
        <div id="content-grid" class="grid"></div>
        <div id="loading" class="loading hidden">Loading...</div>
        <div id="empty" class="empty hidden">No content found</div>
      </section>

      <!-- Status/error messages -->
      <div id="status" class="status hidden"></div>

      <!-- Device Flow Auth Modal -->
      <div id="device-flow-modal" class="modal hidden">
        <div class="modal-content">
          <button id="modal-close" class="modal-close">&times;</button>
          <h2 id="modal-title">Connect to Provider</h2>

          <div id="device-flow-loading" class="modal-loading">
            <div class="spinner"></div>
            <p>Initiating device authorization...</p>
          </div>

          <div id="device-flow-code" class="device-code-section hidden">
            <p>Visit this URL and enter the code:</p>
            <a id="verification-url" href="#" target="_blank" class="verification-url"></a>
            <div class="user-code-wrapper">
              <span id="user-code" class="user-code"></span>
              <button id="copy-code-btn" class="copy-btn" title="Copy code">ðŸ“‹</button>
            </div>
            <div class="qr-section">
              <img id="qr-code" class="qr-code" alt="QR Code" />
            </div>
            <p class="polling-status">
              <span class="spinner-small"></span>
              Waiting for authorization...
            </p>
          </div>

          <div id="device-flow-success" class="modal-success hidden">
            <div class="success-icon">âœ“</div>
            <p>Successfully connected!</p>
          </div>

          <div id="device-flow-error" class="modal-error hidden">
            <p id="error-message">An error occurred</p>
            <button id="retry-btn" class="retry-btn">Try Again</button>
          </div>

          <!-- OAuth PKCE flow section -->
          <div id="oauth-flow-section" class="oauth-section hidden">
            <p>Click the button below to sign in with your account:</p>
            <button id="oauth-signin-btn" class="oauth-signin-btn">Sign In</button>
            <p class="oauth-note">You'll be redirected to the provider's login page.</p>
          </div>

          <div id="oauth-processing" class="modal-loading hidden">
            <div class="spinner"></div>
            <p>Processing authorization...</p>
          </div>
        </div>
      </div>
    </div>
    <script type="module" src="main.ts"></script>
  </body>
</html>
